(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{38:function(e,t,s){},64:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(31),r=s.n(a),i=(s(38),s(10)),l=s(11),o=s(13),j=s(12),d=(s(39),s(8)),h=s(2),u=s(0);var b=function(e){var t,s,n,c=e.isAuthenticated,a=e.logout;return t="/login",s="login",c&&(t="/logout",s="logout",n=a),Object(u.jsxs)("header",{className:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom",children:[Object(u.jsx)(d.b,{to:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none",children:"DashBoard"}),Object(u.jsxs)("ul",{className:"nav nav-pills",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:"/users",className:"nav-link",children:"Users"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:"/projects",className:"nav-link",children:"Projects"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:"/tasks",className:"nav-link",children:"Tasks"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:t,className:"nav-link",onClick:n,children:s})})]})]})},x=function(){return Object(u.jsx)("footer",{children:"\xa9 KPK, 2021"})},O=function(e){var t=e.project;return Object(u.jsxs)("tr",{className:"project-row",children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:Object(u.jsx)(d.b,{to:"/projects/detail/".concat(t.id),className:"nav-link",children:t.name})}),Object(u.jsx)("td",{children:t.created}),Object(u.jsx)("td",{children:Object(u.jsx)(d.b,{to:"/projects/delete/".concat(t.id),className:"nav-link",children:"delete"})})]})},p=function(e){var t=e.projects;return Object(u.jsxs)("div",{className:"project-list",children:[Object(u.jsx)("h1",{children:"Projects"}),Object(u.jsxs)("table",{className:"project-list__table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"name"}),Object(u.jsx)("th",{children:"created"}),Object(u.jsx)("th",{children:"actions"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(O,{project:e},e.id)}))})]})]})},m=function(e){var t=e.projects,s=e.users,n=Object(h.e)().id,c=t.filter((function(e){return e.id===+n}))[0],a=s.find((function(e){return c.owner===e.id})),r=s.filter((function(e){return c.members.includes(e.id)}));return Object(u.jsxs)("div",{className:"project-detail",children:[Object(u.jsxs)("h2",{children:["Project: ",c.name]}),Object(u.jsxs)("h3",{children:["Owner: ",a.username]}),Object(u.jsxs)("p",{children:["Created: ",c.created]}),Object(u.jsxs)("p",{children:["Updated: ",c.updated]}),Object(u.jsx)("h4",{children:"Members:"}),Object(u.jsx)("ul",{children:r.map((function(e){return Object(u.jsx)("li",{children:e.username},e.id)}))}),Object(u.jsxs)("p",{children:["Description: ",c.desc]})]})},f=function(e){var t=e.user;return Object(u.jsxs)("tr",{className:"user-row",children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:t.username}),Object(u.jsx)("td",{children:t.date_birth})]})},v=function(e){var t=e.users;return Object(u.jsxs)("div",{className:"user-list",children:[Object(u.jsx)("h1",{children:"Users"}),Object(u.jsxs)("table",{className:"user-list__table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"username"}),Object(u.jsx)("th",{children:"date birth"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(f,{user:e},e.id)}))})]})]})},g=function(e){var t=e.task;return Object(u.jsxs)("tr",{className:"task-row",children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:t.title}),Object(u.jsx)("td",{children:t.text}),Object(u.jsx)("td",{children:t.created}),Object(u.jsx)("td",{children:t.updated}),Object(u.jsx)("td",{children:t.status?"solved":"in progress"})]})},k=function(e){var t=e.tasks;return Object(u.jsxs)("div",{className:"task-list",children:[Object(u.jsx)("h1",{children:"Tasks"}),Object(u.jsxs)("table",{className:"task-list__table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"title"}),Object(u.jsx)("th",{children:"text"}),Object(u.jsx)("th",{children:"created"}),Object(u.jsx)("th",{children:"updated"}),Object(u.jsx)("th",{children:"status"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(g,{task:e},e.id)}))})]})]})},y=function(){return Object(u.jsx)("h1",{children:"Hello from SPA"})},N=s(15),S=s.n(N),w=s(18),T=function(e){Object(o.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={username:"",password:""},n}return Object(l.a)(s,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"login-form",children:Object(u.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(u.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{type:"submit",value:"login"})]})})}}]),s}(c.a.Component),C=function(e){Object(o.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={username:"",password1:"",password2:"",email:""},n}return Object(l.a)(s,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.register(this.state.username,this.state.password1,this.state.password2,this.state.email)}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"login-form",children:Object(u.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(u.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{type:"submit",value:"login"})]})})}}]),s}(c.a.Component),A=function(e){return"".concat("http://127.0.0.1:8000","/api/").concat(e,"/")},I=function(e){Object(o.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={users:[],projects:[],tasks:[],accessToken:n.getAccessToken()},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.loadState()}},{key:"loadState",value:function(){var e=this,t=this.getHeaders();S.a.get(A("users"),{headers:t}).then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)})),S.a.get(A("projects"),{headers:t}).then((function(t){e.setState({projects:t.data})})).catch((function(e){return console.log(e)})),S.a.get(A("project-tasks"),{headers:t}).then((function(t){e.setState({tasks:t.data})})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e,t){var s=this;S.a.post(A("token"),{username:e,password:t}).then((function(e){var t=e.data.refresh,n=e.data.access;console.log(n),s.saveTokens(t,n),s.setState({accessToken:n},s.loadState)})).catch((function(e){return console.log(e)}))}},{key:"register",value:function(e,t,s,n){console.log("do register",e,t,s,n)}},{key:"logout",value:function(){localStorage.setItem("refreshToken",null),localStorage.setItem("accessToken",null),this.clearState()}},{key:"clearState",value:function(){this.setState({accessToken:null,users:[],projects:[],tasks:[]})}},{key:"saveTokens",value:function(e,t){localStorage.setItem("refreshToken",e),localStorage.setItem("accessToken",t)}},{key:"getAccessToken",value:function(){return localStorage.getItem("accessToken")}},{key:"isAuthenticated",value:function(){return"null"!==this.state.accessToken&&null!==this.state.accessToken}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Bearer ".concat(this.state.accessToken)),e}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"main",children:[Object(u.jsxs)(d.a,{children:[Object(u.jsx)(b,{isAuthenticated:this.isAuthenticated(),logout:function(){return e.logout()}}),Object(u.jsx)(h.a,{exact:!0,path:"/",children:Object(u.jsx)(y,{})}),Object(u.jsx)(h.a,{exact:!0,path:"/users",children:Object(u.jsx)(v,{users:this.state.users})}),Object(u.jsx)(h.a,{exact:!0,path:"/projects",children:Object(u.jsx)(p,{projects:this.state.projects})}),Object(u.jsx)(h.a,{exact:!0,path:"/projects/detail/:id",children:Object(u.jsx)(m,{projects:this.state.projects,users:this.state.users})}),Object(u.jsx)(h.a,{exact:!0,path:"/tasks",children:Object(u.jsx)(k,{tasks:this.state.tasks})}),Object(u.jsx)(h.a,{exact:!0,path:"/login",children:Object(u.jsx)(T,{login:function(t,s){return e.login(t,s)}})}),Object(u.jsx)(h.a,{exact:!0,path:"/register",children:Object(u.jsx)(C,{register:function(t,s,n,c){return e.register(t,s,n,c)}})})]}),Object(u.jsx)(x,{})]})}}]),s}(c.a.Component),P=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,65)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),c(e),a(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),P()}},[[64,1,2]]]);
//# sourceMappingURL=main.b3000807.chunk.js.map